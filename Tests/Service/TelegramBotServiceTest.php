<?php

namespace DidUngar\TelegramBundle\Tests\Service;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class TelegramBotServiceTest extends WebTestCase
{
	public function setUp() {
		self::bootKernel();
		$this->container = self::$kernel->getContainer();
		$this->oTgService = $this->container->get('didungar_telegram_bot_service');
		$this->oTgService->setChannel(77523242);// Did
	}
	public function testJson2img()
	{
		$lstJson = [
			// Not funny but i have bug on it :
			'https://maps.googleapis.com/maps/api/staticmap?size=480x480&path=color:0x0000ff|weight:5|47.625983,-122.364486|47.62435,-122.364927&path=color:0x0000ff|weight:5|47.625774,-122.36303|47.622817,-122.363849&path=color:0x0000ff|weight:5|47.625357568263,-122.36550807953|47.624388608946,-122.36308336258&path=color:0x0000ff|weight:5|47.624794,-122.361862|47.625728,-122.360817|47.622191,-122.360754&path=color:0x0000ff|weight:5|47.625209,-122.361813|47.623849,-122.359487&path=color:0x0000ff|weight:5|47.623535,-122.358931|47.625646,-122.358988|47.623426,-122.358141|47.625825,-122.358163&path=color:0x0000ff|weight:5|47.62361,-122.356818|47.625221,-122.356834|47.62425,-122.356845|47.625264,-122.355712|47.624113826169,-122.35686063766|47.6235,-122.355756&path=color:0x0000ff|weight:5|47.623359,-122.354591|47.621705,-122.354554|47.62061,-122.35533|47.621914,-122.356825&path=color:0x0000ff|weight:5|47.623508,-122.353222|47.622819,-122.354184|47.621017,-122.353787|47.622662,-122.352898|47.623508,-122.353222&path=color:0x0000ff|weight:5|47.62335,-122.352467|47.621466,-122.352515|47.622377,-122.352556|47.622519,-122.351981|47.623519,-122.351878|47.621557,-122.351723&path=color:0x0000ff|weight:5|47.621662,-122.351397|47.623586,-122.351566|47.621807,-122.350687|47.623681,-122.351073&path=color:0x0000ff|weight:5|47.623242,-122.348781|47.62383,-122.350246|47.623152,-122.350623|47.622155,-122.348959|47.621443,-122.348656|47.62146,-122.349538|47.621833,-122.349833&path=color:0x0000ff|weight:5|47.621466,-122.348158|47.622142,-122.348606|47.622948,-122.347368|47.622329,-122.347314|47.621658,-122.347865|47.621521,-122.348179|47.621521,-122.348179&path=color:0x0000ff|weight:5|47.621413,-122.347154|47.623444,-122.347153|47.619512,-122.346455|47.623224,-122.34631&path=color:0x0000ff|weight:5|47.623115918674,-122.34426498413|47.623728,-122.345511|47.622060140731,-122.34538078308|47.620156,-122.343474|47.619505,-122.344844|47.620613834966,-122.34578847885&path=color:0x0000ff|weight:5|47.618714,-122.355331|47.619655,-122.354032|47.618357,-122.354032&path=color:0x0000ff|weight:5|47.619679,-122.355322|47.619266,-122.352936|47.619266,-122.352936&path=color:0x0000ff|weight:5|47.619239,-122.351266|47.619548,-122.352086|47.618968,-122.352139|47.618426,-122.350848|47.617889,-122.350787|47.617821,-122.351901&path=color:0x0000ff|weight:5|47.618737,-122.347926|47.619375,-122.348717|47.618871,-122.350528|47.617947,-122.348011|47.616873,-122.34831|47.61766,-122.350031&path=color:0x0000ff|weight:5|47.618641,-122.342121|47.619061,-122.343031|47.618402,-122.343426|47.617682,-122.343447|47.617007,-122.342324|47.61781,-122.341565|47.617851279759,-122.34254837036&path=color:0x0000ff|weight:5|47.61842,-122.339212|47.619481,-122.340629|47.618744,-122.341089|47.616909,-122.340374|47.61842,-122.339212&path=color:0x0000ff|weight:5|47.619457,-122.338682|47.618257,-122.338665|47.616047,-122.338183|47.616047,-122.338183&path=color:0x0000ff|weight:5|47.619457,-122.338682|47.619342,-122.337363&path=color:0x0000ff|weight:5|47.618257,-122.338665|47.618609,-122.336457&path=color:0x0000ff|weight:5|47.616047,-122.338183|47.616858,-122.33628&path=color:0x0000ff|weight:5|47.61866,-122.334106|47.619484,-122.335949|47.618068,-122.336031|47.617168,-122.334923|47.616561,-122.335818&path=color:0x0000ff|weight:5|47.616556,-122.351589|47.614944,-122.351631|47.614944,-122.351631|47.615898600334,-122.35157132149|47.615913064894,-122.35108852386|47.616308,-122.351166|47.61497,-122.351039&path=color:0x0000ff|weight:5|47.614826,-122.350115|47.616859,-122.350715|47.616859,-122.350715&path=color:0x0000ff|weight:5|47.616859,-122.350715|47.617063,-122.349446&path=color:0x0000ff|weight:5|47.615963690823,-122.3504447937|47.61618,-122.34955&path=color:0x0000ff|weight:5|47.614826,-122.350115|47.615006,-122.349047&path=color:0x0000ff|weight:5|47.614851,-122.348686|47.616873,-122.34831|47.616479,-122.347469|47.615694,-122.348206|47.615115,-122.347719&path=color:0x0000ff|weight:5|47.614744,-122.346607|47.617023,-122.34712|47.617023,-122.34712&path=color:0x0000ff|weight:5|47.617023,-122.34712|47.617372,-122.345975&path=color:0x0000ff|weight:5|47.615653,-122.346717|47.615938,-122.344623&path=color:0x0000ff|weight:5|47.614744,-122.346607|47.61494,-122.344354&path=color:0x0000ff|weight:5|47.614371,-122.352043|47.617293,-122.35693|47.61687,-122.356642|47.616626,-122.356528|47.616538,-122.356517|47.615704,-122.356396|47.616586,-122.354591|47.616759,-122.355395|47.617293,-122.35693|47.617293,-122.35693|47.617293,-122.35693|47.617293,-122.35693|47.617323340292,-122.35707521439&path=color:0x0000ff|weight:5|47.619934057434,-122.36192464828|47.620527055348,-122.36222505569|47.621047730897,-122.3629117012|47.621221288261,-122.36377000809&path=color:0x0000ff|weight:5|47.620657224721,-122.36233234406|47.621174,-122.362067|47.621553938265,-122.3618388176&path=color:0x0000ff|weight:5|47.619423,-122.361682|47.61895776573,-122.36261129379|47.6188854471,-122.36372709274|47.619160257359,-122.36547589302|47.621018804614,-122.36580848694|47.621423771124,-122.36570119858|47.621814271574,-122.3661839962|47.622045677872,-122.3665702343&path=color:0x0000ff|weight:5|47.619423,-122.361682|47.61908070717,-122.36017584801|47.619124098197,-122.35881328583|47.61970264179,-122.35851287842|47.620476433837,-122.35835194588|47.620960951999,-122.35841631889|47.622096297863,-122.3602616787|47.62237832263,-122.36095905304|47.622848360527,-122.36128091812|47.623101456106,-122.36152768135&path=color:0x0000ff|weight:5|47.618936070151,-122.36417770386|47.614061568676,-122.36473560333&path=color:0x0000ff|weight:5|47.619423,-122.361682|47.614972860164,-122.36162424088&path=color:0x0000ff|weight:5|47.619423,-122.361682|47.615681631452,-122.35874891281&path=color:0x0000ff|weight:5|47.61957247004,-122.35855579376|47.618502156695,-122.35709667206',
			// Same in tiny url :
			'https://tinyurl.com/gq7ejr2',
		];
		foreach($lstJson as $sJson)
			$this->assertTrue((bool)$this->oTgService->sendPhoto($sJson), 'img not loading');
	}
}
